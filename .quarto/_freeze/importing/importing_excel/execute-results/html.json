{
  "hash": "694df1fb5a777c557494abaf68f3fff9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Importing Excel files\nengine: knitr\nformat: live-html\nwebr:\n  packages:\n    - dplyr\nresources:\n  - images\n---\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n```{webr}\nfor (x in 1:5) {\n  print(x ** 2)\n}\n```\n:::\n\n::: {.cell setup='true'}\n```{webr}\n#| setup: true\n#| \n\na <- 4\nj <- c(1,2,NA)\nb <- c(300,4000,50)\n```\n:::\n\n::: {.cell edit='false' define='ok_reponse'}\n```{webr}\n#| edit: false\n#| output: false\n#| define:\n#|   - ok_reponse\nlibrary(htmltools)\nok_reponse <- function(reponse, n) {\n  if (is.na(reponse)) HTML(\"\")\n  else if (reponse == n) div(HTML(\"Correct ✓\"), style = \"color: green\")\n  else div(HTML(\"Incorrect ✗\"), style = \"color: red\")\n}\n```\n:::\n\n```{ojs}\n//| echo: false\nmutable ok_reponse = (reponse, n) => { return html`Loading...` };\nviewof reponse = Inputs.radio(\n  new Map([\n    [\"First choice.\", 1],\n    [\"Second choice.\", 2],\n    [\"Third choice\", 3],\n    [\"Fourth choice.\", 4]\n  ])\n);\nok_reponse(reponse, 2);\n```\n\n\n\n[welcome to class!]{style=\"color:white\"}\n\n## Tour of R and RStudio\n\nR is just a programming language and can be open in any coding program like Sublime or Visual Code Studio. But we're going to focus on using R in the environment known as RStudio because it easily shows all the different parts, like plots and objects, well.\n\nWhen you first open RStudio, the app is divided into three sections.\n\nMost sections have tabs for even more additional ways to view different sorts of things.\n\n*These sections can be customized and placed wherever you want through the RStudio menu options (if you'd rather the Files tab be in the top right instead of the top left, for example). **Preferences \\> Pane Layout***\n\n![](images/left.png?classes=shadow){width=\"100%\"}\n\nThe tall section on the left is the *console* and that's where you can type in R code to execute.\n\nThis code is also called *commands* or *functions*.\n\n![](images/top-right.png?classes=shadow){width=\"100%\"}\n\nIn the top right section, there's the **Environment** tab where you can see the data or objects you are currently working on.\n\nAt first this section is empty because you have not loaded any data yet.\n\nThere's also a tab in the top right section for **History**-- this is where RStudio keeps track of the commands you run in the console.\n\n![](images/bottom-right.png?classes=shadow){width=\"100%\"}\n\nA *viewer* is on the bottom right, where there are tabs to flip through the **Files** and folder structure of your computer (like in Finder or Explorer), the **Plots** (diagrams) when they've been generated, your list of available R **Packages**, **Help** information etc.\n\n### Reproducibility: Save your scripts\n\nThere's a difference between quick, on-the-fly analysis and analysis you want to rerun later on.\n\nThe code you type out and run in console can be copied and pasted and saved in scripts and R Markdown files. Scripts end with .R file extension and R Markdown files, which mixes both R code and Markdown code, end with .Rmd.\n\n**R scripts versus R Markdown**\n\nYou may hear mentions of \"R Markdown\" and that's essentially the same thing as R scripts except with some enhanced formatting so that the code can be published as a pdf or a website or notebook. R scripts and R Markdown can only be opened by coding programs but the websites or PDFs generated by R Markdown can be open by non-programming people. It's a means for communicating your results effectively to a wider audience. Compare the differences [here](https://github.com/wpinvestigative/helicopters_dc/blob/master/scripts/01_process.R) and [here](https://github.com/wpinvestigative/helicopters_dc/blob/master/03_mapbox_helis.Rmd).\n\nIn this course we'll be alternating between typing code in the console and typing and saving code in a script. The code that's disposable and written just for quick exploration can be and will be written in the console. Code we want to reuse and re purpose later on should be saved in a script.\n\n![](images/four-panes%20copy.png?classes=shadow){width=\"100%\"}\n\nThese R source code files can be viewed in a **Source** section and pushes the console window down to accommodate.\n\nTo create a new script go through the menu *File \\> New File \\> R Script* or through the green plus button on the top left. This will expand the 3 windows in RStudio to 4. The script viewer will appear in the top left quadrant and push the console window into the lower left.\n\n![](images/new.png?classes=shadow){width=\"25%\"}\n\nThe file extensions for these files when saved ends with **.R**\n\nAny code we type in here can be run in the console. Hitting the `Run` button at the top of the script window will run the line of code on which the cursor is sitting.\n\nTo run multiple lines of code, highlight them and click `Run`.\n\n![](images/run_code.png?classes=shadow){width=\"100%\"}\n\nBe sure to save your scripts after you create them. And also save before running your code in case you write code that makes R crash-- which will happen once in a while.\n\n## Scripts\n\nR is an interpreter that uses a command line based environment.\n\nThis means that you have to type commands, rather than use the mouse and menus.\n\nThis has the advantage that you do not always have to retype commands.\n\nYou can store your commands in files, the so-called *scripts*. These scripts have typically file names with the extension **.R** as in **script.R**.\n\nYou can open an editor window to edit these files by clicking *File \\> New* or *File \\> Open file...*\n\nYou can run (send to the console window) part of the code by selecting lines and pressing **CTRL+ENTER** or **CMD+ENTER** or click the *Run* button at the top of the script editor window. If you do not select anything, R will run the line your cursor is on.\n\nYou can always run the whole script with the function `source()`\n\nFor example, to run the entire saved **script.R** if it's in the root directory of the working directory, type\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource(\"script.R\")\n```\n:::\n\n\n\nYou can also click *Run all* in the editor window or type **CTRL+SHIFT+S** or *CMD+SHIFT+S*\n\n## Project directory habits\n\nYour *working directory* is the folder on your computer in which you are currently working. When you ask R to open a certain file, it will look in the working directory for this file, and when you tell R to save a data file or figure, it will save it in the working directory.\n\nBefore you start working, please set your working directory to where all your data and script files are or should be stored.\n\n*When you see code in a black box throughout this class, **I want you to run that code in R unless noted otherwise**. You can run it in the console, I'd prefer you do so in a script so you can see your history. In the video, you'll see me swap back and forth between coding in the console and the script. This really depends on if I'm experimenting with code quickly or if it's something I know I should track. Often I will copy and paste code executed from the console to growing script as an afterthought. Also, **be sure to read the commented out code** because I try to give additional context, like tips on what to do if the command fails.*\n\nThis is an example of setting a working directory to a manual directory on your computer.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# On a mac, it'd look like this\nsetwd(\"~/projects/learn-r-journalism\")\n\n# On a PC, it might look like this\nsetwd(\"C:/Documents/learn-r-journalism\")\n```\n:::\n\n\n\n*Make sure that slashes are forward slashes and that you don't forget the quotation marks.*\n\nWithin RStudio, you can also set the working directory via the menu *Tools \\> Set Working Directory*\n\n[ ](images/setwd.png?classes=shadow){width=\"70%\"}\n\nThe commands above, `setwd()` was an example of setting an **absolute** folder.\n\nThis works for you for the purposes of this class, but if you wanted to share your methodology and script in the future or if you wanted to save run the code on another computer it would likely **not** work because it would be looking through a folder structure that doesn't exist on any computer except the one where the original script was written. This is not ideal for reproducibility.\n\nWorking directories are a tough concept. If you're curious about learning the BEST method for setting up directories for each project you're working on, I've got [some documentation](https://learn.r-journalism.com/en/publishing/workflow/r-projects/).\n\nAlso, if you're still curious, I follow [this structure](https://rstats.wtf/project-oriented-workflow.html) for all my R projects.\n\n## Syntax\n\nYou must follow pretty specific syntax rules for it to work. R won't guess for you.\n\n![](images/left.png?classes=shadow){width=\"100%\"}\n\n-   R is case-sensitive (unlike SQL) [intepreted language](https://en.wikipedia.org/wiki/Interpreted_language) (unlike C)\n-   Can enter commands at prompt `>` or in batch\n-   Comments are preceded by `#`\n    -   This is important to use often in your code for documentation\n    -   You'll see it often in this course\n-   Statements are lines of code such as functions and object assignments\n    -   Enters in code (as in a new line) or semi-colons will separate statements\n\n## Libraries\n\nOne of the many benefits of R is that it is open source and free. This means users like you and me can create code that we use code that people in the data community created to make everyone's lives easier.\n\nThese shared code snippets can help you do something as simple as combining spreadsheets in a folder or something as complicated as seasonally adjusting data in a time series.\n\nThey are organized in so-called *packages* or *libraries*.\n\nYou can do a lot of statistical analysis in R without any additional libraries— this is called base R.\n\nBut other users have created libraries with functions that solve common problems. R package users download only the libraries that they need for an individual project.\n\nTo get a list of all installed packages, go to the packages window or type `library()` in the console window. If the box in front of the package name is ticked in the packages window, the package is loaded and the functions within it are ready to be called.\n\nThere are many more packages available on the R website. If you want to install and use a package (for example, the packaged called \"dplyr\") you should:\n\n-   Install the package: click `install packages` in the packages window and type `dplyr` or type `install.packages(\"dplyr\")` in the console window.\n-   Load the package: Check box in front of `dplyr` or type `library(\"dplyr\")` in the console window.\n\n## Common R commands\n\nR can be used as a calculator.\n\nJust type an equation in the console window after the `>`\n\n*In those code sections, the code preceded by \\## is the output of the code from the lines above.*\n\nPlease type in `10^2 + 26` into the R environment below and click `Run code`.\n\n\n\n::: {.cell exercise='getting_started_1'}\n```{webr}\n#| exercise: getting_started_1\n\n```\n:::\n\n::: {.cell exercise='getting_started_1' check='true'}\n```{webr}\n#| exercise: getting_started_1\n#| check: true\n\nif (identical(.result, 10^2 + 26)) {\n  list(correct = TRUE, message = \"Nice work!\")\n} else {\n  list(correct = FALSE, message = \"That's incorrect, sorry.\")\n}\n\n```\n:::\n\n\n\n### Workspace\n\nYou can give numbers a name.\n\nBy doing so, they become so-called variables which can be used later.\n\nYou can assign values to an object name with either a `=` or `<-`.\n\nThe command below sets `4` as `a`.\n\n\n\n::: {.cell}\n```{webr}\na <- 4\na\n```\n:::\n\n\n\n`a` is now saved up in the `Environment` tab in RStudio.\n\n![](images/environment.png){width=\"100%\"}\n\nYou can do calculations with `a` now.\n\nTry multiplying `a` with any number.\n\n`a * _`\n\n\n\n::: {.cell}\n```{webr}\na *\n```\n:::\n\n\n\nIf you specify `a` again, it will forget what value you had before because you did not assign it to anything.\n\n\n\n::: {.cell exercise='getting_started_11'}\n```{webr}\n#| exercise: getting_started_11\na\n```\n:::\n\n\n\nYou can also assign a value to `a` using the old one\n\n\n\n::: {.cell envir='myenv' exercise='getting_started_12' autorun='true'}\n```{webr}\n#| envir: myenv\n#| exercise: getting_started_12\n#| autorun: true\na <- a + 10\na\n```\n:::\n\n\n\nTo remove all variables from R's memory, type\n\n\n\n::: {.cell}\n```{webr}\nrm(list=ls())\n```\n:::\n\n\n\nor click the \"clear all\" broom button in the work space window.\n\n[ ](images/clear_objects.png?class=shadow){width=\"70%\"}\n\n## Objects in R\n\n### Scalars and vectors\n\nLike in many other programs, R organizes numbers in *scalars* (a single number 0-dimensional), *vectors* (a row of numbers, also called arrays - \\`-dimensional) and *matrices* (which we won't get into now).\n\nThe `a` you defined was scalar.\n\nTo define a vector with the numbers 3,4, and 5, you need the function `c()` which is short for concatenate (or paste together).\n\n\n\n::: {.cell exercise='getting_started_12'}\n```{webr}\n#| exercise: getting_started_12\nb <- c(3,4,5)\nb\n```\n:::\n\n\n\n## Functions\n\nIf you would like to compute the mean of all the elements in the vector `b` from the example above, you could type\n\nPlease type out `(300+4000+50)/3` in the code tester below:\n\n\n\n::: {.cell exercise='getting_started_2' check='true'}\n```{webr}\n#| exercise: getting_started_2\n#| check: true\n#type in and run the code above\n```\n:::\n\n::: {.cell exercise='getting_started_2' check='true'}\n```{webr}\n#| exercise: getting_started_2\n#| check: true\nif (identical(.result, (300+4000+50)/3)) {\n  list(correct = TRUE, message = \"Woo Hoo!\")\n} else {\n  list(correct = FALSE, message = \"Whoops, not correct, sorry.\")\n}\n```\n:::\n\n\n\nBut when the vector is very long, this is very boring and time-consuming work.\n\nFunctions do things to data. R is built on them. Some functions come with R, like `median()` or `summary()` and others come as part of packages that others have created.\n\nWhen you use a function to compute an average, you'll type\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmean(x=b)\n```\n:::\n\n\n\nWithin the brackets you specify the *arguments*.\n\nArguments give extra information to the function. In this case, the argument *x* says of which set of numbers (vector) the mean should computed (namely of b).\n\nSometimes the name of the argument is not necessary:\n\n\n\n::: {.cell exercise='getting_started_3'}\n```{webr}\n#| exercise: getting_started_3\nb <- c(300,4000,50)\nmean(b)\n```\n:::\n\n\n\nAlso works.\n\n## Plots\n\nR can make simple graphics right away.\n\n\n\n::: {.cell exercise='getting_started_4'}\n```{webr}\n#| exercise: getting_started_4\n# rnorm() is a base function that creates random samples from a random distribution\n\nx <- rnorm(100)\n\n# plot() is a base function that charts\n\nplot(x)\n```\n:::\n\n\n\n-   In the first line, 100 random numbers are assigned to the variable x, which becomes a vector by this operation.\n-   In the second line, all these values are plotted in the plot window.\n\n## Not available data\n\nWhen you work with real data, you will encounter missing values because instrumentation failed or human error.\n\nWhen a data is *not available*, you'll often find an `NA` instead of a number.\n\n\n\n::: {.cell}\n```{webr}\nj <- c(1,2,NA)\n```\n:::\n\n\n\nComputing statistics of incomplete data sets is strictly not possible.\n\nmaybe the largest value occurred during the weekend when you didn't measure. Therefore, R will say that it doesn't know what the largest value of `j` is\n\n\n\n::: {.cell}\n```{webr}\nmax(j)\n```\n:::\n\n\n\nIf you don't mind about the missing data and want to compute the statistics anyway, you can add the argument `na.rm=TRUE` (Should I remove the `NA`s? Yes)\n\n\n\n::: {.cell}\n\n```{.rwebr .cell-code}\nmax(j, na.rm=T)\n```\n:::\n\n\n\n*`NA`s will also affect any sort of math if you're not careful*\n\n\n\n::: {.cell}\n```{webr}\nsum(j)\n# compared to\nsum(j, na.rm=T)\n```\n:::\n\n\n\nHere are [some](http://faculty.nps.edu/sebuttre/home/R/missings.html) [links](https://datascienceplus.com/missing-values-in-r/) on how to [handle](https://stats.idre.ucla.edu/r/faq/how-does-r-handle-missing-values/) `NA`s in your data\n\n## Base R versus Tidyverse\n\nI will often mention \"Base R\" and \"Tidyverse\" throughout the course.\n\nBase R is what you get when you install R and don't install anything extra.\n\nEverything you do in Tidyverse-- the importing and wrangling of data, as well as the visualizations-- can be done with Base R. It's just older, the syntax is trickier, and it unfortunately has huge learning curve.\n\nFor the purposes of this class, you'll learn just enough Base R to get things done but we'll spend most of our time using functions in packages that have since been created by users to make our lives easier and have a good history of support from their creators.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}